(this["webpackJsonpfile-transfer"]=this["webpackJsonpfile-transfer"]||[]).push([[0],[,,,,,,,,,function(e,t,n){},,,function(e,t,n){e.exports=n(22)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(10),r=n.n(i),l=n(2),c=n(3),s=n(1),d=n(5),u=n(4),h=n(7),p=n.n(h),m=n(11),f=(n(18),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).folderName=void 0,a.handleFolderNameChanged=a.handleFolderNameChanged.bind(Object(s.a)(a)),a}return Object(c.a)(n,[{key:"handleFolderNameChanged",value:function(e){e.stopPropagation(),this.folderName=e.target.value}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"background-fill"}),o.a.createElement("div",{className:"popup-window"},o.a.createElement("div",{className:"popup-title"},"Enter Folder Name"),o.a.createElement("input",{className:"folder-name-input",type:"text",placeholder:"Folder Name",onInputCapture:function(t){return e.handleFolderNameChanged(t)}}),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){return e.props.onCreateClicked(e.folderName)}},"Create"),o.a.createElement("button",{onClick:this.props.onCancelClicked},"Cancel"))))}}]),n}(o.a.Component)),v=(n(9),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(c.a)(n,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"background-fill"}),o.a.createElement("div",{className:"popup-window"},o.a.createElement("div",{className:"popup-title"},this.props.title),o.a.createElement("div",{className:"popup-content"},this.props.content),o.a.createElement("div",null,o.a.createElement("button",{onClick:this.props.onConfirmClicked},"Confirm"),o.a.createElement("button",{onClick:this.props.onCancelClicked},"Cancel"))))}}]),n}(o.a.Component)),k=n(6),C=n.n(k),b=(n(19),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={itemName:a.props.name,itemSize:a.props.size,itemIsFolder:a.props.isDirectory},a.onRemove=a.onRemove.bind(Object(s.a)(a)),a.onDownload=a.onDownload.bind(Object(s.a)(a)),a.onItemSelection=a.onItemSelection.bind(Object(s.a)(a)),a.checkboxRef=o.a.createRef(),a}return Object(c.a)(n,[{key:"onRemove",value:function(e){e.stopPropagation(),this.props.onRemove(this.props.id)}},{key:"onDownload",value:function(e){e.stopPropagation(),this.props.onDownload(this.state.itemName)}},{key:"onItemSelection",value:function(e){e.stopPropagation(),this.props.onItemSelection(this,!this.checkboxRef.current.checked)}},{key:"render",value:function(){var e=this,t=this.state.itemIsFolder?o.a.createElement("img",{src:"folder-icon.bmp",alt:"Folder"}):null,n=".."!==this.state.itemName?o.a.createElement("input",{ref:this.checkboxRef,className:"item-checkbox",type:"checkbox",onClick:function(t){return e.onItemSelection(t)}}):null;return this.props.owner.checkboxes.push(this.checkboxRef),o.a.createElement("div",{className:"item",onClick:function(){return e.props.onItemClick(e.state)}},o.a.createElement("div",{className:"item-part"},n),o.a.createElement("div",{className:"item-part"},o.a.createElement("div",{className:"item-combo"},t,o.a.createElement("span",{className:"item-name"},this.state.itemName))),o.a.createElement("div",{className:"item-part"},o.a.createElement("span",{className:"item-size"},this.state.itemSize)))}}]),n}(o.a.Component)),g=n(24);n(20);function E(e,t,n,a,i,r){var l=Object(g.a)();return o.a.createElement(b,{owner:r,name:e.name,size:e.size,isDirectory:e.isDirectory,created:e.created,modified:e.modified,onRemove:t,onItemClick:n,onDownload:a,onItemSelection:i,key:l,id:l})}function w(e,t){return e.props.name<t.props.name?-1:e.props.name.toLowerCase()>t.props.name.toLowerCase()?1:0}var y=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={files:[],onItemClick:a.props.onItemClick,folderCreationWindow:void 0},a.selectedItems=[],a.checkboxes=[],C()("body").on("ondrop",(function(e){e.preventDefault()})),window.addEventListener("dragover",a.handleWindowListeners),a.onDragEnter=a.onDragEnter.bind(Object(s.a)(a)),a.onDragExit=a.onDragExit.bind(Object(s.a)(a)),a.onDrop=a.onDrop.bind(Object(s.a)(a)),a.removeItem=a.removeItem.bind(Object(s.a)(a)),a.generateItems=a.updateItems.bind(Object(s.a)(a)),a.itemClicked=a.itemClicked.bind(Object(s.a)(a)),a.requestDownload=a.requestDownload.bind(Object(s.a)(a)),a.itemSelectionChanged=a.itemSelectionChanged.bind(Object(s.a)(a)),a.downloadSelectedItems=a.downloadSelectedItems.bind(Object(s.a)(a)),a.onDownloadClicked=a.onDownloadClicked.bind(Object(s.a)(a)),a.onRemoveClicked=a.onRemoveClicked.bind(Object(s.a)(a)),a.onSelectAllClicked=a.onSelectAllClicked.bind(Object(s.a)(a)),a.onCreateFolderClicked=a.onCreateFolderClicked.bind(Object(s.a)(a)),a.closeCreationWindow=a.closeFolderCreationWindow.bind(Object(s.a)(a)),a.createFolder=a.createFolder.bind(Object(s.a)(a)),a.closeFolderCreationWindow=a.closeFolderCreationWindow.bind(Object(s.a)(a)),a.onRefreshClicked=a.onRefreshClicked.bind(Object(s.a)(a)),a}return Object(c.a)(n,[{key:"handleWindowListeners",value:function(e){e.preventDefault()}},{key:"onDragEnter",value:function(e){e.preventDefault(),e.stopPropagation(),C()(".drop-area").addClass("drag-on")}},{key:"onDragExit",value:function(e){e.preventDefault(),e.stopPropagation(),C()(".drop-area").removeClass("drag-on")}},{key:"onDrop",value:function(e){e.preventDefault(),e.stopPropagation(),C()(".drop-area").removeClass("drag-on");var t=e.dataTransfer.files,n=this,a=0;this.uploadFile(this.props.path(),t[a],(function e(o,i){if(4===o&&200===i){var r=t[a];n.state.files.push(E(r,n.removeItem,n.itemClicked,n.requestDownload,n.itemSelectionChanged,n)),a++,n.setState({files:n.state.files}),a!==t.length&&n.uploadFile(n.props.path(),t[a],e)}}))}},{key:"uploadFile",value:function(e,t,n){var a=new XMLHttpRequest,o=new FormData;o.append("rpath",e),o.append("data",t),a.onreadystatechange=function(){void 0!==n&&n(a.readyState,a.status)},a.open("POST","http://localhost:7777/api/u/test-user/a"),a.send(o)}},{key:"itemClicked",value:function(e){e.itemIsFolder&&this.state.onItemClick(e.itemName)}},{key:"updateItems",value:function(e){var t=this,n=[];void 0!==this.props.prevFolder&&n.push(E({name:"..",isDirectory:!0,created:void 0,modified:void 0},void 0,this.itemClicked,void 0,void 0,this)),e.forEach((function(e){n.push(E(e,t.removeItem,t.itemClicked,t.requestDownload,t.itemSelectionChanged,t))})),this.setState({files:n,needUpdate:!1})}},{key:"removeItem",value:function(){var e=Object(m.a)(p.a.mark((function e(t){var n,a,o,i=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.state.files,a=function(e){if(n[e].props.id===t){var a=n[e].props.name,o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&200===o.status&&(n.splice(e,1),i.setState({files:n}))};var r=i.props.path();return o.open("DELETE","http://localhost:7777/api/"+r+("%2F"===r.substring(r.length-3,r.length)?"":"%2F")+a),o.send(),"break"}},o=0;case 3:if(!(o<n.length)){e.next=10;break}if("break"!==a(o)){e.next=7;break}return e.abrupt("break",10);case 7:o++,e.next=3;break;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDownload",value:function(e){var t=this.props.path(),n=document.createElement("a");n.setAttribute("target",null),n.setAttribute("href","http://localhost:7777/api/d/".concat(t).concat("2%F"===t.substring(t.length-3,t.length)?"":"%2F").concat(e)),n.click(),n=null}},{key:"itemSelectionChanged",value:function(e,t){if(t){var n=this.selectedItems.findIndex((function(t){return t.state.itemName===e.state.itemName}));this.selectedItems.splice(n,1)}else this.selectedItems.push(e)}},{key:"downloadSelectedItems",value:function(){var e=this;if(0!==this.selectedItems.length)var t=0,n=setInterval((function(){e.requestDownload(e.selectedItems[t].state.itemName),++t===e.selectedItems.length&&clearInterval(n)}),500)}},{key:"removeSelectedItems",value:function(){var e=this;if(0!==this.selectedItems.length)var t=0,n=setInterval((function(){e.removeItem(e.selectedItems[t].props.id),++t===e.selectedItems.length&&(clearInterval(n),e.selectedItems.length=0)}),150)}},{key:"onDownloadClicked",value:function(){this.downloadSelectedItems()}},{key:"onRemoveClicked",value:function(){var e=this;this.setState({folderCreationWindow:o.a.createElement(v,{title:"Item Deletion",content:"Are you sure you want to delete the item(s) selected? Once they are gone, they are gone.",onCancelClicked:function(){e.setState({folderCreationWindow:void 0})},onConfirmClicked:function(){e.setState({folderCreationWindow:void 0}),e.removeSelectedItems()}})})}},{key:"onSelectAllClicked",value:function(){for(var e=!1,t=0;t<this.checkboxes.length;t++)if(null!==this.checkboxes[t].current&&this.checkboxes[t].current.checked){e=!0;break}if(e)for(var n=0;n<this.checkboxes.length;n++)this.checkboxes[n].current&&!0===this.checkboxes[n].current.checked&&this.checkboxes[n].current.click();else for(var a=0;a<this.checkboxes.length;a++)null!==this.checkboxes[a].current&&this.checkboxes[a].current.click()}},{key:"onCreateFolderClicked",value:function(){this.setState({folderCreationWindow:o.a.createElement(f,{onCreateClicked:this.createFolder,onCancelClicked:this.closeFolderCreationWindow})})}},{key:"onRefreshClicked",value:function(){this.props.onRefreshClicked(".")}},{key:"createFolder",value:function(e){var t=this;if(this.closeFolderCreationWindow(),void 0!==e&&""!==e){var n=E({name:e,size:0,isDirectory:!0,created:void 0,modified:void 0},void 0,this.itemClicked,this.requestDownload,this.itemSelectionChanged,this),a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&200===a.status&&(t.state.files.push(n),t.setState({files:t.state.files}))};var o=this.props.path();a.open("POST","http://localhost:7777/api/cf/".concat(o).concat("2%F"===o.substring(o.length-3,o.length)?"":"%2F").concat(e)),a.send()}}},{key:"closeFolderCreationWindow",value:function(){this.setState({folderCreationWindow:void 0})}},{key:"componentDidUpdate",value:function(e){void 0!==this.props.items&&(null==e.items?this.updateItems(this.props.items):function(e,t){if(void 0===e||void 0===t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(e.items,this.props.items)||this.updateItems(this.props.items))}},{key:"render",value:function(){this.state.files.sort(w);var e=[],t=[];this.state.files.forEach((function(n){n.props.isDirectory?e.push(n):t.push(n)}));var n="No files here :(. Drag and drop some files here to start.";return 0!==this.state.files.length&&(n=o.a.createElement(o.a.Fragment,null,e,t)),o.a.createElement(o.a.Fragment,null,this.state.folderCreationWindow,o.a.createElement("div",{className:"button-collection"},o.a.createElement("button",{onClick:this.onRefreshClicked},"Refresh"),o.a.createElement("button",{onClick:this.onSelectAllClicked},"Select All"),o.a.createElement("button",{onClick:this.onCreateFolderClicked},"Create Folder"),o.a.createElement("button",{onClick:this.onDownloadClicked},"Download"),o.a.createElement("button",{onClick:this.onRemoveClicked},"Remove")),o.a.createElement("div",{className:"drop-area",onDragEnter:this.onDragEnter,onDragLeave:this.onDragExit,onDropCapture:this.onDrop,onDrop:this.onDrop},o.a.createElement("div",null,n)))}}]),n}(o.a.Component),F=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return o.a.createElement("button",{onClick:this.props.onClick},this.props.text)}}]),n}(o.a.Component),N=(o.a.Component,function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(l.a)(this,n),(a=t.call(this,e)).state={profiles:[]},a.profileName=void 0,a.handleCancelClicked=a.handleCancelClicked.bind(Object(s.a)(a)),a.handleProfileNameChanged=a.handleProfileNameChanged.bind(Object(s.a)(a)),a.createProfile=a.createProfile.bind(Object(s.a)(a));var o=new XMLHttpRequest;return o.onreadystatechange=function(){4===o.readyState&&200===o.status&&a.setState({profiles:JSON.parse(o.response)})},o.open("GET","http://localhost:7777/api/i/profile"),o.send(),a}return Object(c.a)(n,[{key:"createProfile",value:function(){var e=this;if(void 0!==this.profileName&&""!==this.profileName){var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&200===t.status&&e.handleProfileChange(void 0,e.profileName)},t.open("POST","http://localhost:7777/api/cp/".concat(this.profileName)),t.send()}}},{key:"handleProfileNameChanged",value:function(e){e.stopPropagation(),this.profileName=e.target.value}},{key:"handleCancelClicked",value:function(e){e.stopPropagation(),this.props.handleCancel()}},{key:"handleProfileChange",value:function(e,t){void 0!==e&&e.stopPropagation(),this.props.handleProfileChange(t)}},{key:"handleDeleteClicked",value:function(e,t){var n=this;e.stopPropagation(),this.setState({confirmationWindow:o.a.createElement(v,{title:"Profile Deletion",content:"Are you sure you want to delete this profile? It will delete all the files from this profile. There is no way to get them back after.",onConfirmClicked:function(){n.setState({confirmationWindow:void 0});var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&(n.props.currentProfile===n.state.profiles[t]?(n.state.profiles.splice(t,1),n.handleProfileChange(void 0,n.state.profiles[0])):(n.state.profiles.splice(t,1),n.setState({profiles:n.state.profiles})))},e.open("DELETE","http://localhost:7777/api/dp/".concat(n.state.profiles[t])),e.send()},onCancelClicked:function(){n.setState({confirmationWindow:void 0})}})})}},{key:"render",value:function(){var e=this,t=[];return this.state.profiles.forEach((function(n,a){t.push(o.a.createElement("div",{onClick:function(t){return e.handleProfileChange(t,n)},className:"profile-single",key:a},o.a.createElement("div",{className:"profile-name"},n),o.a.createElement("button",{onClick:function(t){return e.handleDeleteClicked(t,a)}},"Delete")))})),void 0!==this.state.confirmationWindow?o.a.createElement(o.a.Fragment,null,this.state.confirmationWindow):o.a.createElement(o.a.Fragment,null,this.state.confirmationWindow,o.a.createElement("div",{className:"background-fill"}),o.a.createElement("div",{className:"profile-window"},o.a.createElement("div",{className:"profile-block-container"},o.a.createElement("div",{className:"profile-window-block divider-line-right divider-line-bottom"},o.a.createElement("div",{className:"profile-window-block-title divider-line-bottom"},"Select Profile"),t),o.a.createElement("div",{className:"profile-window-block divider-line-bottom"},o.a.createElement("div",{className:"profile-window-block-title divider-line-bottom"},o.a.createElement("div",null,"Create Profile")),o.a.createElement("div",{className:"profile-creation"},o.a.createElement("input",{className:"profile-name-input",type:"text",placeholder:"Profile Name",onInputCapture:this.handleProfileNameChanged}),o.a.createElement("button",{className:"profile-create-button",onClick:this.createProfile},"Create Profile")))),o.a.createElement("div",{className:"profile-footer"},o.a.createElement("button",{onClick:this.handleCancelClicked},"Cancel"))))}}]),n}(o.a.Component)),O=(n(21),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).requestFolder=e.requestFolder.bind(Object(s.a)(e)),e.getCurrentPath=e.getCurrentPath.bind(Object(s.a)(e)),e.openProfileManagement=e.openProfileManagement.bind(Object(s.a)(e)),e.closeProfileManagement=e.closeProfileManagement.bind(Object(s.a)(e)),e.changeProfile=e.changeProfile.bind(Object(s.a)(e)),e.state={dropArea:o.a.createElement(y,{onItemClick:e.requestFolder,path:e.getCurrentPath,onRefreshClicked:e.requestFolder}),profileWindow:void 0,profile:"(No profile selected)",currentFolder:"%2F"},e}return Object(c.a)(n,[{key:"getPrevFolder",value:function(e){if("%2F"!==e&&void 0!==e){var t=e.split("%2F");return""===t[t.length-2]?"%2F":t[t.length-2]}}},{key:"getPrevFolderPath",value:function(e){if("%2F"!==e&&void 0!==e){var t=e.split("%2F");t.splice(t.length-1,1);var n="";return t.forEach((function(e){n+=e+"%2F"})),""===n?void 0:n.substring(0,n.length-3)}}},{key:"getCurrentPath",value:function(e){var t="".concat(this.state.profile).concat(this.state.currentFolder);return e&&(t=t.replace(/(%2F)/g,"/")),t}},{key:"requestFolder",value:function(e){var t,n,a,i=this,r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&200===r.status&&(t=JSON.parse(r.responseText),i.setState({currentFolder:n,dropArea:o.a.createElement(y,{items:t,prevFolder:i.getPrevFolder(n),path:i.getCurrentPath,onRefreshClicked:i.requestFolder})}))},n="."===e?this.state.currentFolder:".."===e?this.getPrevFolderPath(this.state.currentFolder):this.state.currentFolder+("%2F"===this.state.currentFolder?"":"%2F")+("%2F"===e?"":e),a="http://localhost:7777/api/".concat(this.state.profile).concat(n),r.open("GET",a,!0),r.send()}},{key:"openProfileManagement",value:function(){var e=this;this.setState({profileWindow:o.a.createElement(N,{currentProfile:this.state.profile,handleCancel:this.closeProfileManagement,handleProfileChange:function(t){return e.changeProfile(t)}})})}},{key:"closeProfileManagement",value:function(){this.setState({profileWindow:void 0})}},{key:"changeProfile",value:function(e){var t=this;this.setState({profile:e,currentFolder:"%2F"},(function(){t.closeProfileManagement(),t.requestFolder("%2F")}))}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.state.profileWindow,o.a.createElement("div",{className:"app"},o.a.createElement("div",null,o.a.createElement("h1",null,"Home Cloud Drive v1"),o.a.createElement("h2",null,"Profile: ",this.state.profile," ",o.a.createElement("button",{onClick:this.openProfileManagement},"Change")),o.a.createElement("div",null,o.a.createElement("div",{className:"path-container"},o.a.createElement("div",{className:"path-title"},"Current Path"),o.a.createElement("div",{className:"path-actual"},"/",this.getCurrentPath(!0))))),this.state.dropArea))}}]),n}(o.a.Component)),P=document.getElementById("root");r.a.render(o.a.createElement(O,null),P)}],[[12,1,2]]]);
//# sourceMappingURL=main.2b70f02e.chunk.js.map